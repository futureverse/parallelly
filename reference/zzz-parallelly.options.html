<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Options Used by the 'parallelly' Package — zzz-parallelly.options • parallelly</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Options Used by the 'parallelly' Package — zzz-parallelly.options"><meta name="description" content="Below are the R options and environment variables that are used by the
parallelly package and packages enhancing it.

WARNING: Note that the names and the default values of these options may
change in future versions of the package.  Please use with care until
further notice."><meta property="og:description" content="Below are the R options and environment variables that are used by the
parallelly package and packages enhancing it.

WARNING: Note that the names and the default values of these options may
change in future versions of the package.  Please use with care until
further notice."><meta property="og:image" content="https://parallelly.futureverse.org/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">parallelly</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.45.0-9016</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/parallelly-01-intro.html">An Introduction to 'parallelly'</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-10-local-workers.html">Parallel Workers on the Local Machine</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-12-remote-workers.html">Parallel Workers on Other Machines</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-15-cloud-workers.html">Parallel Workers in the Cloud</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-17-hpc-workers.html">Parallel Workers on High-Performance Compute Environments</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-20-limit-workers.html">Parallel Workers with CPU and Memory Limited</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-21-container-workers.html">Parallel Workers Running in Linux Containers</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-22-wine-workers.html">Parallel Workers Running MS Windows via Wine</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.futureverse.org/"><span class="fa fas fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><a class="external-link dropdown-item" href="https://doFuture.futureverse.org">doFuture (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://furrr.futureverse.org">furrr (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.futureverse.org">future</a></li>
    <li><a class="external-link dropdown-item" href="https://future.apply.futureverse.org">future.apply (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.batchtools.futureverse.org">future.batchtools (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.callr.futureverse.org">future.callr (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mirai.futureverse.org">future.mirai (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tests.futureverse.org">future.tests</a></li>
    <li><a class="external-link dropdown-item" href="https://globals.futureverse.org">globals</a></li>
    <li><a class="external-link dropdown-item" href="https://listenv.futureverse.org">listenv</a></li>
    <li><a class="dropdown-item" href="https://parallelly.futureverse.org">parallelly</a></li>
    <li><a class="external-link dropdown-item" href="https://progressr.futureverse.org">progressr</a></li>
    <li><a class="external-link dropdown-item" href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tools.futureverse.org">future.tools (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mapreduce.futureverse.org">future.mapreduce (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://marshal.futureverse.org">marshal (experimental)</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=parallelly"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/futureverse/parallelly/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Options Used by the 'parallelly' Package</h1>
      <small class="dont-index">Source: <a href="https://github.com/futureverse/parallelly/blob/HEAD/R/options.R" class="external-link"><code>R/options.R</code></a></small>
      <div class="d-none name"><code>zzz-parallelly.options.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Below are the <span style="R">R</span> options and environment variables that are used by the
<span class="pkg">parallelly</span> package and packages enhancing it.<br><br><em>WARNING: Note that the names and the default values of these options may
change in future versions of the package.  Please use with care until
further notice.</em></p>
    </div>


    <div class="section level2">
    <h2 id="configuring-number-of-parallel-workers">Configuring number of parallel workers<a class="anchor" aria-label="anchor" href="#configuring-number-of-parallel-workers"></a></h2>



<p>The below <span style="R">R</span> options and environment variables control the default results of <code><a href="availableCores.html">availableCores()</a></code> and <code><a href="availableWorkers.html">availableWorkers()</a></code>.</p>
<dl><dt><code>parallelly.availableCores.logical</code>:</dt>
<dd><p>(logical) The default value of argument <code>logical</code> as used by <code><a href="availableCores.html">availableCores()</a></code>, <code><a href="availableWorkers.html">availableWorkers()</a></code>, and <code><a href="availableCores.html">availableCores()</a></code> for querying <code>parallel::detectCores(logical = logical)</code>.  The default is <code>TRUE</code> just like it is for <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">parallel::detectCores()</a></code>.</p></dd>


<dt><code>parallelly.availableCores.methods</code>:</dt>
<dd><p>(character vector) Default lookup methods for <code><a href="availableCores.html">availableCores()</a></code>. (Default: <code>c("system", "cgroups.cpuset", "cgroups.cpuquota", "cgroups2.cpu.max", "nproc", "mc.cores", "BiocParallel", "_R_CHECK_LIMIT_CORES_", "Bioconductor", "LSF", "PJM", "PBS", "SGE", "Slurm", "fallback", "custom")</code>)</p></dd>


<dt><code>parallelly.availableCores.custom</code>:</dt>
<dd><p>(function) If set and a function, then this function will be called (without arguments) by <code><a href="availableCores.html">availableCores()</a></code> where its value, coerced to an integer, is interpreted as a number of cores.</p></dd>


<dt><code>parallelly.availableCores.fallback</code>:</dt>
<dd><p>(integer) Number of cores to use when no core-specifying settings are detected other than <code>"system"</code> and <code>"nproc"</code>.  This options makes it possible to set the default number of cores returned by <code><a href="availableCores.html">availableCores()</a></code> / <code><a href="availableWorkers.html">availableWorkers()</a></code> yet allow users and schedulers to override it.  In multi-tenant environment, such as HPC clusters, it is useful to set environment variable <code class="env">R_PARALLELLY_AVAILABLECORES_FALLBACK</code> to <code>1</code>, which will set this option when the package is loaded.</p></dd>


<dt><code>parallelly.availableCores.system</code>:</dt>
<dd><p>(integer) Number of "system" cores used instead of what is reported by <code><a href="availableCores.html">availableCores</a>(which = "system")</code>. This option allows you to effectively override what <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">parallel::detectCores()</a></code> reports the system has.</p></dd>


<dt><code>parallelly.availableCores.min</code>:</dt>
<dd><p>(integer) The minimum number of cores <code><a href="availableCores.html">availableCores()</a></code> is allowed to return. This can be used to force multiple cores on a single-core environment. If this is limit is applied, the names of the returned value are appended with an asterisk (<code>*</code>).  (Default: <code>1L</code>)</p></dd>


<dt><code>parallelly.availableCores.omit</code>:</dt>
<dd><p>(integer; non-negative) Number of cores to set aside, i.e. not to include.</p></dd>


<dt><code>parallelly.availableCores.max</code>:</dt>
<dd><p>(integer; positive) Maximum number of cores to return.</p></dd>


<dt><code>parallelly.availableWorkers.methods</code>:</dt>
<dd><p>(character vector) Default lookup methods for <code><a href="availableWorkers.html">availableWorkers()</a></code>. (Default: <code>c("mc.cores", "BiocParallel", "_R_CHECK_LIMIT_CORES_", "Bioconductor", "LSF", "PJM", "PBS", "SGE", "Slurm", "custom", "cgroups.cpuset", "cgroups.cpuquota", "cgroups2.cpu.max", "nproc", "system", "fallback")</code>)</p></dd>


<dt><code>parallelly.availableWorkers.custom</code>:</dt>
<dd><p>(function) If set and a function, then this function will be called (without arguments) by <code><a href="availableWorkers.html">availableWorkers()</a></code> where its value, coerced to a character vector, is interpreted as hostnames of available workers.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="configuring-forked-parallel-processing">Configuring forked parallel processing<a class="anchor" aria-label="anchor" href="#configuring-forked-parallel-processing"></a></h2>



<p>The below <span style="R">R</span> options and environment variables control the default result of <code><a href="supportsMulticore.html">supportsMulticore()</a></code>.</p>
<dl><dt><code>parallelly.fork.enable</code>:</dt>
<dd><p>(logical) Enable or disable <em>forked</em> processing.  If <code>FALSE</code>, multicore futures becomes sequential futures.  If <code>NA</code>, or not set (the default), the a set of best-practices rules decide whether should be supported or not.</p></dd>


<dt><code>parallelly.supportsMulticore.disableOn</code>:</dt>
<dd><p>(character vector)
because the environment in which R runs is considered unstable for
forked processing.
If this vector contains <code>"rstudio_console"</code>, it is disabled when
running R in the RStudio Console.
If this vector contains <code>"rstudio_terminal"</code>, it is disabled when
running R in the RStudio Terminal.
(Default: <code>c("rstudio_console", "rstudio_terminal")</code>)</p></dd>


<dt><code>parallelly.supportsMulticore.unstable</code>:</dt>
<dd><p>(character) Controls whether a warning should be produced or not whenever multicore processing is automatically disabled per settings in option <code>parallelly.supportsMulticore.disableOn</code>.  If <code>"warn"</code> (default), then an informative warning is produces the first time 'multicore' futures are used.  If <code>"quiet"</code>, no warning is produced.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="configuring-setup-of-parallel-psock-clusters">Configuring setup of parallel PSOCK clusters<a class="anchor" aria-label="anchor" href="#configuring-setup-of-parallel-psock-clusters"></a></h2>



<p>The below <span style="R">R</span> options and environment variables control the default results of <code><a href="makeClusterPSOCK.html">makeClusterPSOCK()</a></code> and its helper function <code><a href="makeClusterPSOCK.html">makeNodePSOCK()</a></code> that creates the individual cluster nodes.</p>
<dl><dt><code>parallelly.maxWorkers.localhost</code>:</dt>
<dd><p>(two numerics) Maximum number of localhost workers, relative to <code><a href="availableCores.html">availableCores()</a></code>, accepted and allowed. The first element specifies the "soft" limit, which triggers a warning, if exceeded. The second element specifies the "hard" limit, which triggers an error if exceeded. These limits exist to protect against CPU overuse of the current machine, which sometimes happens by mistake without the user causing it being aware. These limits can be disabled by setting them to <code>+Inf</code> (not recommended). If only the first exist, no error is produced (defaults to <code>c(1.0, 3.0)</code> corresponding to a maximum 100% and 300% use).</p></dd>


<dt><code>parallelly.makeNodePSOCK.setup_strategy</code>:</dt>
<dd><p>(character) If <code>"parallel"</code> (default), the PSOCK cluster nodes are set up concurrently.  If <code>"sequential"</code>, they are set up sequentially.</p></dd>


<dt><code>parallelly.makeNodePSOCK.validate</code>:</dt>
<dd><p>(logical) If TRUE (default), after the nodes have been created, they are all validated that they work by inquiring about their session information, which is saved in attribute <code>session_info</code> of each node.</p></dd>


<dt><code>parallelly.makeNodePSOCK.connectTimeout</code>:</dt>
<dd><p>(numeric) The maximum time (in seconds) allowed for each socket connection between the master and a worker to be established (defaults to 2*60 seconds = 2 minutes).</p></dd>


<dt><code>parallelly.makeNodePSOCK.timeout</code>:</dt>
<dd><p>(numeric) The maximum time (in seconds) allowed to pass without the master and a worker communicate with each other (defaults to 30<em>24</em>60*60 seconds = 30 days).</p></dd>


<dt><code>parallelly.makeNodePSOCK.useXDR</code>:</dt>
<dd><p>(logical) If FALSE (default), the communication between master and workers, which is binary, will use small-endian (faster), otherwise big-endian ("XDR"; slower).</p></dd>


<dt><code>parallelly.makeNodePSOCK.socketOptions</code>:</dt>
<dd><p>(character string) If set to another value than <code>"NULL"</code>, then option <code>socketOptions</code> is set to this value on the workers during startup. See <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">base::socketConnection()</a></code> for details. (defaults to <code>"no-delay"</code>)</p></dd>


<dt><code>parallelly.makeNodePSOCK.rshcmd</code>:</dt>
<dd><p>(character vector) The command to be run on the master to launch a process on another host.</p></dd>


<dt><code>parallelly.makeNodePSOCK.rshopts</code>:</dt>
<dd><p>(character vector) Addition command-line options appended to <code>rshcmd</code>.  These arguments are only applied when connecting to non-localhost machines.</p></dd>


<dt><code>parallelly.makeNodePSOCK.tries</code>:</dt>
<dd><p>(integer) The maximum number of attempts done to launch each node.  Only used when setting up cluster nodes using the sequential strategy.</p></dd>


<dt><code>parallelly.makeNodePSOCK.tries.delay</code>:</dt>
<dd><p>(numeric) The number of seconds to wait before trying to launch a cluster node that failed to launch previously.  Only used when setting up cluster nodes using the sequential strategy.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="options-for-debugging">Options for debugging<a class="anchor" aria-label="anchor" href="#options-for-debugging"></a></h2>



<dl><dt><code>parallelly.debug</code>:</dt>
<dd><p>(logical)
If <code>TRUE</code>, extensive debug messages are generated.
(Default: <code>FALSE</code>)</p></dd>


<dt><code>parallelly.makeNodePSOCK.calls</code>:</dt>
<dd><p>(logical)
If TRUE, then the call stack that launched the cluster node is revealed
as a string part of the system call such that it can be viewed using
tools such as <code>ps</code>.
(Default: <code>FALSE</code>)</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="environment-variables-that-set-r-options">Environment variables that set R options<a class="anchor" aria-label="anchor" href="#environment-variables-that-set-r-options"></a></h2>


<p>All of the above <span style="R">R</span> <code>parallelly.*</code> options can be set by
corresponding environment variables <code class="env">R_PARALLELLY_*</code> <em>when the
<span class="pkg">parallelly</span> package is loaded</em>.
For example, if <code>R_PARALLELLY_MAKENODEPSOCK_SETUP_STRATEGY="sequential"</code>,
then option <code>parallelly.makeNodePSOCK.setup_strategy</code> is set to
<code>"sequential"</code> (character).
Similarly, if <code>R_PARALLELLY_AVAILABLECORES_FALLBACK="1"</code>, then option
<code>parallelly.availableCores.fallback</code> is set to <code>1</code> (integer).</p>
    </div>
    <div class="section level2">
    <h2 id="backward-compatibility-with-the-future-package">Backward compatibility with the <span class="pkg">future</span> package<a class="anchor" aria-label="anchor" href="#backward-compatibility-with-the-future-package"></a></h2>



<p>The functions in the <span class="pkg">parallelly</span> package originates from the
<span class="pkg">future</span> package.  Because they are widely used within the future
ecosystem, we need to keep them backward compatible for quite a long time,
in order for all existing packages and R scripts to have time to adjust.
This also goes for the <span style="R">R</span> options and the environment variables used to
configure these functions.
All options and environment variables used here have prefixes <code>parallelly.</code>
and <code>R_PARALLELLY_</code>, respectively.  Because of the backward compatibility
with the <span class="pkg">future</span> package, the same settings can also be controlled
by options and environment variables with prefixes <code>future.</code> and
<code>R_FUTURE_</code> until further notice, e.g. setting option
<code>future.availableCores.fallback=1</code> is the same as setting option
<code>parallelly.availableCores.fallback=1</code>, and setting environment
variable <code class="env">R_FUTURE_AVAILABLECORES_FALLBACK=1</code> is the same as setting
<code class="env">R_PARALLELLY_AVAILABLECORES_FALLBACK=1</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>To set <span style="R">R</span> options when <span style="R">R</span> starts (even before the <span class="pkg">parallelly</span> package is loaded), see the <a href="https://rdrr.io/r/base/Startup.html" class="external-link">Startup</a> help page.  The <a href="https://cran.r-project.org/package=startup" class="external-link"><span class="pkg">startup</span></a> package provides a friendly mechanism for configuring <span style="R">R</span>'s startup process.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Set an R option:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>parallelly.availableCores.fallback <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9007.</p>
</div>

    </footer></div>





  </body></html>

