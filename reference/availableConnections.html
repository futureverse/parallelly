<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Number of Available and Free Connections — availableConnections • parallelly</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Number of Available and Free Connections — availableConnections"><meta name="description" content="The number of connections that can be open at the same time in R is
typically 128, where the first three are occupied by the always open
stdin(), stdout(), and stderr() connections, which leaves 125 slots
available for other types of connections.  Connections are used in many
places, e.g. reading and writing to file, downloading URLs, communicating
with parallel R processes over a socket connections (e.g.
parallel::makeCluster() and makeClusterPSOCK()), and capturing
standard output via text connections (e.g. utils::capture.output())."><meta property="og:description" content="The number of connections that can be open at the same time in R is
typically 128, where the first three are occupied by the always open
stdin(), stdout(), and stderr() connections, which leaves 125 slots
available for other types of connections.  Connections are used in many
places, e.g. reading and writing to file, downloading URLs, communicating
with parallel R processes over a socket connections (e.g.
parallel::makeCluster() and makeClusterPSOCK()), and capturing
standard output via text connections (e.g. utils::capture.output())."><meta property="og:image" content="https://parallelly.futureverse.org/logo.png"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">parallelly</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.45.1-9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/parallelly-01-intro.html">An Introduction to 'parallelly'</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-10-local-workers.html">Parallel Workers on the Local Machine</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-12-remote-workers.html">Parallel Workers on Other Machines</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-15-cloud-workers.html">Parallel Workers in the Cloud</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-17-hpc-workers.html">Parallel Workers on High-Performance Compute Environments</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-20-limit-workers.html">Parallel Workers with CPU and Memory Limited</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-21-container-workers.html">Parallel Workers Running in Linux Containers</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-22-wine-workers.html">Parallel Workers Running MS Windows via Wine</a></li>
    <li><a class="dropdown-item" href="../articles/parallelly-25-sandbox-workers.html">Parallel Workers Running in a Sandbox</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.futureverse.org/"><span class="fa fas fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><a class="external-link dropdown-item" href="https://doFuture.futureverse.org">doFuture (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://furrr.futureverse.org">furrr (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.futureverse.org">future</a></li>
    <li><a class="external-link dropdown-item" href="https://future.apply.futureverse.org">future.apply (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.batchtools.futureverse.org">future.batchtools (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.callr.futureverse.org">future.callr (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mirai.futureverse.org">future.mirai (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tests.futureverse.org">future.tests</a></li>
    <li><a class="external-link dropdown-item" href="https://globals.futureverse.org">globals</a></li>
    <li><a class="external-link dropdown-item" href="https://listenv.futureverse.org">listenv</a></li>
    <li><a class="dropdown-item" href="https://parallelly.futureverse.org">parallelly</a></li>
    <li><a class="external-link dropdown-item" href="https://progressr.futureverse.org">progressr</a></li>
    <li><a class="external-link dropdown-item" href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tools.futureverse.org">future.tools (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mapreduce.futureverse.org">future.mapreduce (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://marshal.futureverse.org">marshal (experimental)</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=parallelly"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/futureverse/parallelly/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Number of Available and Free Connections</h1>
      <small class="dont-index">Source: <a href="https://github.com/futureverse/parallelly/blob/HEAD/R/availableConnections.R" class="external-link"><code>R/availableConnections.R</code></a></small>
      <div class="d-none name"><code>availableConnections.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The number of <a href="https://rdrr.io/r/base/connections.html" class="external-link">connections</a> that can be open at the same time in <span style="R">R</span> is
<em>typically</em> 128, where the first three are occupied by the always open
<code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdin()</a></code>, <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stdout()</a></code>, and <code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">stderr()</a></code> connections, which leaves 125 slots
available for other types of connections.  Connections are used in many
places, e.g. reading and writing to file, downloading URLs, communicating
with parallel <span style="R">R</span> processes over a socket connections (e.g.
<code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makeCluster()</a></code> and <code><a href="makeClusterPSOCK.html">makeClusterPSOCK()</a></code>), and capturing
standard output via text connections (e.g. <code><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">utils::capture.output()</a></code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">availableConnections</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">freeConnections</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A non-negative integer, or <code>+Inf</code> if the available number of connections
is greater than 16384, which is a limit be set via option
<code><a href="zzz-parallelly.options.html">parallelly.availableConnections.tries</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="how-to-increase-the-limit">How to increase the limit<a class="anchor" aria-label="anchor" href="#how-to-increase-the-limit"></a></h2>


<p>In R (&gt;= 4.4.0), it is possible to <em>increase</em> the limit of 128 connections
to a greater number via command-line option <code>--max-connections=N</code>, e.g.</p>
<p></p><div class="sourceCode r"><pre><code>$ Rscript -e "parallelly::availableConnections()"
[1] 128

$ Rscript --max-connections=512 -e "parallelly::availableConnections()"
[1] 512
</code></pre><p></p></div>
<p>For R (&lt; 4.4.0), the limit can only be changed by rebuilding <span style="R">R</span> from
source, because the limited is hardcoded as a</p>
<p></p><div class="sourceCode c"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="pp">#define NCONNECTIONS </span><span class="dv">128</span></span></code></pre><p></p></div>
<p>in <code class="file">src/main/connections.c</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="how-the-limit-is-identified">How the limit is identified<a class="anchor" aria-label="anchor" href="#how-the-limit-is-identified"></a></h2>


<p>Since the limit <em>might</em> changed, for instance in custom <span style="R">R</span> builds or in
future releases of <span style="R">R</span>, we do not want to assume that the limit is 128 for
all <span style="R">R</span> installation.  Unfortunately, it is not possible to query <span style="R">R</span> for what
the limit is.
Instead, <code>availableConnections()</code> infers it from trial-and-error.
Specifically, it attempts to open as many concurrent connections as possible
until it fails.  For efficiency, the result is memoized throughout the
current <span style="R">R</span> session.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ol><li><p>'WISH: Increase limit of maximum number of open connections (currently 125+3)', 2016-07-09,
<a href="https://github.com/HenrikBengtsson/Wishlist-for-R/issues/28" class="external-link">https://github.com/HenrikBengtsson/Wishlist-for-R/issues/28</a></p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/base/showConnections.html" class="external-link">base::showConnections()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">total</span> <span class="op">&lt;-</span> <span class="fu">availableConnections</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"You can have "</span>, <span class="va">total</span>, <span class="st">" connections open in this R installation"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> You can have 128 connections open in this R installation</span>
<span class="r-in"><span><span class="va">free</span> <span class="op">&lt;-</span> <span class="fu">freeConnections</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"There are "</span>, <span class="va">free</span>, <span class="st">" connections remaining"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> There are 124 connections remaining</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9007.</p>
</div>

    </footer></div>





  </body></html>

